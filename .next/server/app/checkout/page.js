(()=>{var e={};e.id=285,e.ids=[285],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},29457:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>d}),t(75113),t(3958),t(35866);var a=t(23191),s=t(88716),i=t(37922),n=t.n(i),o=t(95231),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);t.d(r,c);let d=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,75113)),"/Users/GabrielLeubitz/Downloads/igani/app/checkout/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3958)),"/Users/GabrielLeubitz/Downloads/igani/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],l=["/Users/GabrielLeubitz/Downloads/igani/app/checkout/page.tsx"],u="/checkout/page",f={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},34539:(e,r,t)=>{let a={"2f6fbfa9fbf6130ef91631a18c49c4fa10a880f7":()=>Promise.resolve().then(t.bind(t,65231)).then(e=>e.createCheckoutSession),"3fd2358a6fc269823a12d68170673a7f5522cd79":()=>Promise.resolve().then(t.bind(t,65231)).then(e=>e.saveQuestionnaire),"45b33c437cf131aec3b18b259100a2215fd6bf84":()=>Promise.resolve().then(t.bind(t,65231)).then(e=>e.createBuyerRepo),"80f62b4bd6da0a6a17060fa15e6c8ff706026e07":()=>Promise.resolve().then(t.bind(t,65231)).then(e=>e.createOrder),c32b5879f836346875a463aa05b75f9e8b0ba654:()=>Promise.resolve().then(t.bind(t,65231)).then(e=>e.generateCopy)};async function s(e,...r){return(await a[e]()).apply(null,r)}e.exports={"2f6fbfa9fbf6130ef91631a18c49c4fa10a880f7":s.bind(null,"2f6fbfa9fbf6130ef91631a18c49c4fa10a880f7"),"3fd2358a6fc269823a12d68170673a7f5522cd79":s.bind(null,"3fd2358a6fc269823a12d68170673a7f5522cd79"),"45b33c437cf131aec3b18b259100a2215fd6bf84":s.bind(null,"45b33c437cf131aec3b18b259100a2215fd6bf84"),"80f62b4bd6da0a6a17060fa15e6c8ff706026e07":s.bind(null,"80f62b4bd6da0a6a17060fa15e6c8ff706026e07"),c32b5879f836346875a463aa05b75f9e8b0ba654:s.bind(null,"c32b5879f836346875a463aa05b75f9e8b0ba654")}},93507:(e,r,t)=>{Promise.resolve().then(t.bind(t,17941))},17941:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var a=t(10326),s=t(17577),i=t(35047),n=t(34266),o=t(17119);o.Ry({brand:o.Ry({name:o.Z_().min(1,"Brand name is required"),tagline:o.Z_().min(1,"Tagline is required"),tone:o.Km(["simple","energetic","formal"])}),location:o.Z_().min(1,"Location is required"),audience:o.Ry({founders:o.Rx().min(0).max(100),builders:o.Rx().min(0).max(100),investors:o.Rx().min(0).max(100)}),colors:o.Ry({primary:o.Z_().regex(/^#[0-9A-F]{6}$/i,"Invalid hex color"),secondary:o.Z_().regex(/^#[0-9A-F]{6}$/i,"Invalid hex color")}),logo:o.Z_().optional(),heroImage:o.Z_().optional(),email:o.Ry({senderDomain:o.Z_().min(1,"Sender domain is required")}),sms:o.Ry({country:o.Z_().min(1,"SMS country is required")}),event:o.Ry({cadence:o.Km(["monthly","quarterly"]),sampleName:o.Z_().min(1,"Sample event name is required")})}),o.Ry({site:o.Ry({brandName:o.Z_(),tagline:o.Z_(),home:o.Ry({heroTitle:o.Z_(),heroSubtitle:o.Z_()}),cta:o.Z_()}),emails:o.Ry({confirmation:o.Ry({subject:o.Z_(),html:o.Z_(),text:o.Z_()}),reminder24h:o.Ry({subject:o.Z_(),html:o.Z_(),text:o.Z_()}),postEvent:o.Ry({subject:o.Z_(),html:o.Z_(),text:o.Z_()})}),sms:o.Ry({reminder3h:o.Z_(),doorInfo:o.Z_()}),theme:o.Ry({colors:o.Ry({primary:o.Z_(),text:o.Z_().default("#11151A"),muted:o.Z_().default("#4B5563"),bg:o.Z_().default("#F7F5F3")}),roleColors:o.Ry({Organizer:o.Z_().default("#7A1E1E"),Speaker:o.Z_().default("#C27803"),Sponsor:o.Z_().default("#0E7490"),VIP:o.Z_().default("#6D28D9"),Staff:o.Z_().default("#374151"),Attendee:o.Z_().default("#475569")}),logo:o.Ry({dark:o.Z_().default("/branding/default/logo.svg"),light:o.Z_().default("/branding/default/logo-white.svg")}),images:o.Ry({hero:o.Z_().default("/branding/default/hero.jpg")}),brandName:o.Z_()})});let c=[{id:"starter",name:"Starter",price:99,priceId:process.env.STRIPE_PRICE_STARTER||"",features:["Event site template","Basic customization","Email templates","SMS notifications"]},{id:"plus",name:"Plus",price:199,priceId:process.env.STRIPE_PRICE_PLUS||"",features:["Everything in Starter","Advanced customization","Priority support","Custom branding"]},{id:"pro",name:"Pro",price:399,priceId:process.env.STRIPE_PRICE_PRO||"",features:["Everything in Plus","White-label license","Source code access","1:1 setup support"]}];var d=t(14004);function l(){let e=(0,i.useSearchParams)().get("orderId"),[r,t]=(0,s.useState)("plus"),[o,l]=(0,s.useState)(!1),u=async r=>{if(e){l(!0);try{let{url:t}=await (0,d.Mc)(e,r);window.location.href=t}catch(e){console.error("Checkout error:",e),l(!1)}}};return a.jsx("div",{className:"min-h-screen bg-slate-50",children:a.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Choose Your Plan"}),a.jsx("p",{className:"text-slate-600",children:"Select the plan that best fits your event needs."})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:c.map(e=>(0,a.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border-2 p-6 relative ${r===e.id?"border-blue-500":"border-slate-200"}`,children:["plus"===e.id&&a.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:a.jsx("span",{className:"bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Recommended"})}),(0,a.jsxs)("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:e.name}),(0,a.jsxs)("div",{className:"text-3xl font-bold text-slate-900",children:["$",e.price]}),a.jsx("div",{className:"text-slate-600",children:"one-time payment"})]}),a.jsx("ul",{className:"space-y-3 mb-6",children:e.features.map((e,r)=>(0,a.jsxs)("li",{className:"flex items-center text-slate-600",children:[a.jsx("div",{className:"w-4 h-4 bg-green-100 rounded-full flex items-center justify-center mr-3",children:"âœ“"}),e]},r))}),a.jsx(n.z,{className:"w-full",variant:r===e.id?"default":"outline",onClick:()=>{t(e.id),u(e.id)},disabled:o,children:o&&r===e.id?"Processing...":"Select Plan"})]},e.id))}),a.jsx("div",{className:"text-center mt-8 text-sm text-slate-500",children:a.jsx("p",{children:"Secure payment powered by Stripe. 30-day money-back guarantee."})})]})})})}function u(){return a.jsx(s.Suspense,{fallback:a.jsx("div",{children:"Loading..."}),children:a.jsx(l,{})})}},34266:(e,r,t)=>{"use strict";t.d(r,{z:()=>l});var a=t(10326),s=t(17577),i=t(86438),n=t(79360),o=t(41135),c=t(31009);let d=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef(({className:e,variant:r,size:t,asChild:s=!1,...n},l)=>{let u=s?i.g7:"button";return a.jsx(u,{className:function(...e){return(0,c.m6)((0,o.W)(e))}(d({variant:r,size:t,className:e})),ref:l,...n})});l.displayName="Button"},14004:(e,r,t)=>{"use strict";t.d(r,{AE:()=>s,Mc:()=>i,kj:()=>n}),t(15424);var a=t(46242),s=(0,a.$)("45b33c437cf131aec3b18b259100a2215fd6bf84");(0,a.$)("80f62b4bd6da0a6a17060fa15e6c8ff706026e07"),(0,a.$)("3fd2358a6fc269823a12d68170673a7f5522cd79");var i=(0,a.$)("2f6fbfa9fbf6130ef91631a18c49c4fa10a880f7"),n=(0,a.$)("c32b5879f836346875a463aa05b75f9e8b0ba654")},35047:(e,r,t)=>{"use strict";var a=t(77389);t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},75113:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/GabrielLeubitz/Downloads/igani/app/checkout/page.tsx#default`)},65231:(e,r,t)=>{"use strict";t.r(r),t.d(r,{createBuyerRepo:()=>l,createCheckoutSession:()=>c,createOrder:()=>n,generateCopy:()=>d,saveQuestionnaire:()=>o});var a=t(27745);t(26461);var s=t(30207);async function i(){let e=(await t.e(346).then(t.bind(t,82346))).default,{prisma:r}=await t.e(180).then(t.bind(t,99180)),{plans:a}=await t.e(460).then(t.bind(t,98460));return{stripe:new e(process.env.STRIPE_SECRET_KEY,{apiVersion:"2023-10-16"}),prisma:r,plans:a}}async function n(){try{let{prisma:e}=await i();return await e.order.create({data:{status:"DRAFT",amount:0,currency:"usd",customer:{create:{name:"",email:""}}}})}catch(e){throw console.error("Error creating order:",e),Error("Failed to create order")}}async function o(e,r){try{let{prisma:t}=await i();return await t.questionnaire.upsert({where:{orderId:e},create:{orderId:e,answers:r},update:{answers:r}}),(0,s.revalidatePath)(`/orders/${e}`),{success:!0}}catch(e){throw console.error("Error saving questionnaire:",e),Error("Failed to save questionnaire")}}async function c(e,r){try{let{stripe:t,prisma:a,plans:s}=await i(),n=s.find(e=>e.id===r);if(!n)throw Error("Invalid plan");let o=await a.order.findUnique({where:{id:e},include:{customer:!0}});if(!o)throw Error("Order not found");let c=await t.checkout.sessions.create({mode:"payment",payment_method_types:["card"],line_items:[{price:n.priceId,quantity:1}],metadata:{orderId:e,planId:r},success_url:`http://localhost:3000/orders/${e}?session_id={CHECKOUT_SESSION_ID}`,cancel_url:`http://localhost:3000/checkout?orderId=${e}`,customer_email:o.customer.email||void 0});return await a.order.update({where:{id:e},data:{amount:100*n.price,currency:"usd"}}),{url:c.url}}catch(e){throw console.error("Error creating checkout session:",e),Error("Failed to create checkout session")}}async function d(e){try{let{prisma:r}=await i(),t=await r.order.findUnique({where:{id:e},include:{questionnaire:!0}});if(!t||!t.questionnaire)throw Error("Order or questionnaire not found");let a=await fetch("http://localhost:3000/api/generate-copy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e,answers:t.questionnaire.answers})});if(!a.ok)throw Error("Failed to generate copy");let n=await a.json();return(0,s.revalidatePath)(`/orders/${e}`),n}catch(e){throw console.error("Error generating copy:",e),Error("Failed to generate copy")}}async function l(e){try{let r=await fetch("http://localhost:3000/api/create-repo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e})});if(!r.ok)throw Error("Failed to create repository");let t=await r.json();return(0,s.revalidatePath)(`/orders/${e}`),t}catch(e){throw console.error("Error creating repository:",e),Error("Failed to create repository")}}(0,t(85723).h)([n,o,c,d,l]),(0,a.j)("80f62b4bd6da0a6a17060fa15e6c8ff706026e07",n),(0,a.j)("3fd2358a6fc269823a12d68170673a7f5522cd79",o),(0,a.j)("2f6fbfa9fbf6130ef91631a18c49c4fa10a880f7",c),(0,a.j)("c32b5879f836346875a463aa05b75f9e8b0ba654",d),(0,a.j)("45b33c437cf131aec3b18b259100a2215fd6bf84",l)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[276,410,119,500,453],()=>t(29457));module.exports=a})();