"use strict";(()=>{var e={};e.id=562,e.ids=[562],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},80665:e=>{e.exports=require("dns")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},32694:e=>{e.exports=require("http2")},98216:e=>{e.exports=require("net")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},35816:e=>{e.exports=require("process")},76162:e=>{e.exports=require("stream")},82452:e=>{e.exports=require("tls")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},59091:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>T,patchFetch:()=>S,requestAsyncStorage:()=>h,routeModule:()=>w,serverHooks:()=>O,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>g,OPTIONS:()=>x,POST:()=>A});var o=r(49303),n=r(88716),i=r(60670),a=r(87070),l=r(93820),c=r(2188);let d="settings",p="offerSettings";async function u(){try{let e=(0,l.doc)(c.db,d,p),t=await (0,l.QT)(e);if(t.exists()){let e=t.data();return{title:e.title||"Black Friday Sale",endDate:e.endDate,isActive:e.isActive,lastUpdated:e.lastUpdated}}return null}catch(e){return console.error("Error getting offer settings from Firestore:",e),null}}async function f(e){try{let t=(0,l.doc)(c.db,d,p);await (0,l.pl)(t,e)}catch(e){throw console.error("Error saving offer settings to Firestore:",e),e}}async function g(){try{console.log("API request from","server",": /api/admin/offer-settings");let e=await u();if(!e){let e=new Date;e.setDate(e.getDate()+7);let t={title:"Black Friday Sale",endDate:e.toISOString(),isActive:!0,lastUpdated:new Date().toISOString()};return await f(t),a.NextResponse.json(t,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})}return a.NextResponse.json(e,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})}catch(e){return console.error("Error fetching offer settings:",e),a.NextResponse.json({error:"Failed to fetch offer settings"},{status:500})}}async function A(e){try{console.log("API request from","server",": /api/admin/offer-settings");let t=await e.json();console.log("Received POST data:",t);let{title:r,endDate:s,isActive:o}=t;if(!r||!r.trim())return a.NextResponse.json({error:"Title is required"},{status:400});if(!s)return a.NextResponse.json({error:"End date is required"},{status:400});let n=new Date(s);if(isNaN(n.getTime()))return a.NextResponse.json({error:"Invalid date format"},{status:400});let i={title:r.trim(),endDate:n.toISOString(),isActive:!1!==o,lastUpdated:new Date().toISOString()};return await f(i),a.NextResponse.json(i,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})}catch(e){return console.error("Error saving offer settings:",e),a.NextResponse.json({error:"Failed to save offer settings"},{status:500,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})}}async function x(){return new a.NextResponse(null,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})}let w=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/offer-settings/route",pathname:"/api/admin/offer-settings",filename:"route",bundlePath:"app/api/admin/offer-settings/route"},resolvedPagePath:"/Users/GabrielLeubitz/Downloads/igani/app/api/admin/offer-settings/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:O}=w,T="/api/admin/offer-settings/route";function S(){return(0,i.patchFetch)({serverHooks:O,staticGenerationAsyncStorage:m})}},2188:(e,t,r)=>{r.d(t,{db:()=>i});var s=r(29362),o=r(93820);let n=0===(0,s.C6)().length?(0,s.ZF)({apiKey:"AIzaSyAzn2artxg7S8ZANNwlVHTPq7bsqFbvE-A",authDomain:"igani-78bbc.firebaseapp.com",projectId:"igani-78bbc",storageBucket:"igani-78bbc.firebasestorage.app",messagingSenderId:"1058353839556",appId:"1:1058353839556:web:ffd347b4aedf7944d7f891",measurementId:"G-ZQEK0R7VTP"}):(0,s.C6)()[0],i=(0,o.ad)(n)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,999,972],()=>r(59091));module.exports=s})();