"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[912],{3912:function(e,t,r){r.d(t,{H:function(){return o}});var n=r(7437),i=r(2265);function o(e){let{SIM_RESOLUTION:t=64,DYE_RESOLUTION:r=512,CAPTURE_RESOLUTION:o=512,DENSITY_DISSIPATION:a=2.5,VELOCITY_DISSIPATION:u=1.5,PRESSURE:l=.1,PRESSURE_ITERATIONS:c=12,CURL:v=2,SPLAT_RADIUS:f=.2,SPLAT_FORCE:s=4e3,SHADING:m=!0,COLOR_UPDATE_SPEED:d=5,BACK_COLOR:h={r:.5,g:0,b:0},TRANSPARENT:g=!0}=e,x=(0,i.useRef)(null),[E,T]=(0,i.useState)(!1),[R,p]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let e,n,i,o,h,g;let E=()=>T(window.innerWidth<=480);E(),p(window.matchMedia("(prefers-reduced-motion: reduce)").matches),window.addEventListener("resize",E);let R=x.current;if(!R)return;let D=window.innerWidth<=768;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;let S={SIM_RESOLUTION:t,DYE_RESOLUTION:D?Math.min(r,256):r,DENSITY_DISSIPATION:a,VELOCITY_DISSIPATION:u,PRESSURE:l,PRESSURE_ITERATIONS:c,CURL:v,SPLAT_RADIUS:f,SPLAT_FORCE:D?.5*s:s,SHADING:m,COLOR_UPDATE_SPEED:D?.5*d:d},w=[new function(){this.id=-1,this.texcoordX=0,this.texcoordY=0,this.prevTexcoordX=0,this.prevTexcoordY=0,this.deltaX=0,this.deltaY=0,this.down=!1,this.moved=!1,this.color=[0,0,0]}],{gl:_,ext:y}=function(e){let t,r,n,i,o;let a={alpha:!0,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1},u=e.getContext("webgl2",a),l=!!u;l||(u=e.getContext("webgl",a)||e.getContext("experimental-webgl",a)),l?(u.getExtension("EXT_color_buffer_float"),r=u.getExtension("OES_texture_float_linear")):(t=u.getExtension("OES_texture_half_float"),r=u.getExtension("OES_texture_half_float_linear")),u.clearColor(0,0,0,1);let c=l?u.HALF_FLOAT:t&&t.HALF_FLOAT_OES;if(l){let e=u;n=A(e,e.RGBA16F,e.RGBA,c),i=A(e,e.RG16F,e.RG,c),o=A(e,e.R16F,e.RED,c)}else{let e=u;n=A(e,e.RGBA,e.RGBA,c),i=A(e,e.RGBA,e.RGBA,c),o=A(e,e.RGBA,e.RGBA,c)}return{gl:u,ext:{formatRGBA:n,formatRG:i,formatR:o,halfFloatTexType:c,supportLinearFiltering:r}}}(R);function A(e,t,r,n){if(!function(e,t,r,n){let i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,t,4,4,0,r,n,null);let o=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE}(e,t,r,n))switch(t){case e.R16F:return A(e,e.RG16F,e.RG,n);case e.RG16F:return A(e,e.RGBA16F,e.RGBA,n);default:return null}return{internalFormat:t,format:r}}y.supportLinearFiltering||(S.DYE_RESOLUTION=256,S.SHADING=!1);class F{setKeywords(e){let t=0;for(let r=0;r<e.length;r++)t+=function(e){if(0===e.length)return 0;let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}(e[r]);let r=this.programs[t];if(null==r){let n=B(_.FRAGMENT_SHADER,this.fragmentShaderSource,e);r=U(this.vertexShader,n),this.programs[t]=r}r!==this.activeProgram&&(this.uniforms=b(r),this.activeProgram=r)}bind(){_.useProgram(this.activeProgram)}constructor(e,t){this.vertexShader=e,this.fragmentShaderSource=t,this.programs=[],this.activeProgram=null,this.uniforms=[]}}class L{bind(){_.useProgram(this.program)}constructor(e,t){this.uniforms={},this.program=U(e,t),this.uniforms=b(this.program)}}function U(e,t){let r=_.createProgram();return _.attachShader(r,e),_.attachShader(r,t),_.linkProgram(r),_.getProgramParameter(r,_.LINK_STATUS)||console.trace(_.getProgramInfoLog(r)),r}function b(e){let t=[],r=_.getProgramParameter(e,_.ACTIVE_UNIFORMS);for(let n=0;n<r;n++){let r=_.getActiveUniform(e,n).name;t[r]=_.getUniformLocation(e,r)}return t}function B(e,t,r){t=function(e,t){if(!t)return e;let r="";return t.forEach(e=>{r+="#define "+e+"\n"}),r+e}(t,r);let n=_.createShader(e);return _.shaderSource(n,t),_.compileShader(n),_.getShaderParameter(n,_.COMPILE_STATUS)||console.trace(_.getShaderInfoLog(n)),n}let P=B(_.VERTEX_SHADER,"\n        precision highp float;\n        attribute vec2 aPosition;\n        varying vec2 vUv;\n        varying vec2 vL;\n        varying vec2 vR;\n        varying vec2 vT;\n        varying vec2 vB;\n        uniform vec2 texelSize;\n\n        void main () {\n            vUv = aPosition * 0.5 + 0.5;\n            vL = vUv - vec2(texelSize.x, 0.0);\n            vR = vUv + vec2(texelSize.x, 0.0);\n            vT = vUv + vec2(0.0, texelSize.y);\n            vB = vUv - vec2(0.0, texelSize.y);\n            gl_Position = vec4(aPosition, 0.0, 1.0);\n        }\n      "),X=B(_.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        uniform sampler2D uTexture;\n\n        void main () {\n            gl_FragColor = texture2D(uTexture, vUv);\n        }\n      "),C=B(_.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        uniform sampler2D uTexture;\n        uniform float value;\n\n        void main () {\n            gl_FragColor = value * texture2D(uTexture, vUv);\n        }\n     "),N=B(_.FRAGMENT_SHADER,"\n        precision highp float;\n        precision highp sampler2D;\n        varying vec2 vUv;\n        uniform sampler2D uTarget;\n        uniform float aspectRatio;\n        uniform vec3 color;\n        uniform vec2 point;\n        uniform float radius;\n\n        void main () {\n            vec2 p = vUv - point.xy;\n            p.x *= aspectRatio;\n            vec3 splat = exp(-dot(p, p) / radius) * color;\n            vec3 base = texture2D(uTarget, vUv).xyz;\n            gl_FragColor = vec4(base + splat, 1.0);\n        }\n      "),z=B(_.FRAGMENT_SHADER,"\n        precision highp float;\n        precision highp sampler2D;\n        varying vec2 vUv;\n        uniform sampler2D uVelocity;\n        uniform sampler2D uSource;\n        uniform vec2 texelSize;\n        uniform vec2 dyeTexelSize;\n        uniform float dt;\n        uniform float dissipation;\n\n        vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {\n            vec2 st = uv / tsize - 0.5;\n            vec2 iuv = floor(st);\n            vec2 fuv = fract(st);\n\n            vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);\n            vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);\n            vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);\n            vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);\n\n            return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n        }\n\n        void main () {\n            #ifdef MANUAL_FILTERING\n                vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;\n                vec4 result = bilerp(uSource, coord, dyeTexelSize);\n            #else\n                vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\n                vec4 result = texture2D(uSource, coord);\n            #endif\n            float decay = 1.0 + dissipation * dt;\n            gl_FragColor = result / decay;\n        }\n      ",y.supportLinearFiltering?void 0:["MANUAL_FILTERING"]),M=B(_.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uVelocity;\n\n        void main () {\n            float L = texture2D(uVelocity, vL).x;\n            float R = texture2D(uVelocity, vR).x;\n            float T = texture2D(uVelocity, vT).y;\n            float B = texture2D(uVelocity, vB).y;\n\n            vec2 C = texture2D(uVelocity, vUv).xy;\n            if (vL.x < 0.0) { L = -C.x; }\n            if (vR.x > 1.0) { R = -C.x; }\n            if (vT.y > 1.0) { T = -C.y; }\n            if (vB.y < 0.0) { B = -C.y; }\n\n            float div = 0.5 * (R - L + T - B);\n            gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n        }\n      "),I=B(_.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uVelocity;\n\n        void main () {\n            float L = texture2D(uVelocity, vL).y;\n            float R = texture2D(uVelocity, vR).y;\n            float T = texture2D(uVelocity, vT).x;\n            float B = texture2D(uVelocity, vB).x;\n            float vorticity = R - L - T + B;\n            gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);\n        }\n      "),O=B(_.FRAGMENT_SHADER,"\n        precision highp float;\n        precision highp sampler2D;\n        varying vec2 vUv;\n        varying vec2 vL;\n        varying vec2 vR;\n        varying vec2 vT;\n        varying vec2 vB;\n        uniform sampler2D uVelocity;\n        uniform sampler2D uCurl;\n        uniform float curl;\n        uniform float dt;\n\n        void main () {\n            float L = texture2D(uCurl, vL).x;\n            float R = texture2D(uCurl, vR).x;\n            float T = texture2D(uCurl, vT).x;\n            float B = texture2D(uCurl, vB).x;\n            float C = texture2D(uCurl, vUv).x;\n\n            vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));\n            force /= length(force) + 0.0001;\n            force *= curl * C;\n            force.y *= -1.0;\n\n            vec2 velocity = texture2D(uVelocity, vUv).xy;\n            velocity += force * dt;\n            velocity = min(max(velocity, -1000.0), 1000.0);\n            gl_FragColor = vec4(velocity, 0.0, 1.0);\n        }\n      "),G=B(_.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uPressure;\n        uniform sampler2D uDivergence;\n\n        void main () {\n            float L = texture2D(uPressure, vL).x;\n            float R = texture2D(uPressure, vR).x;\n            float T = texture2D(uPressure, vT).x;\n            float B = texture2D(uPressure, vB).x;\n            float C = texture2D(uPressure, vUv).x;\n            float divergence = texture2D(uDivergence, vUv).x;\n            float pressure = (L + R + B + T - divergence) * 0.25;\n            gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\n        }\n      "),Y=B(_.FRAGMENT_SHADER,"\n        precision mediump float;\n        precision mediump sampler2D;\n        varying highp vec2 vUv;\n        varying highp vec2 vL;\n        varying highp vec2 vR;\n        varying highp vec2 vT;\n        varying highp vec2 vB;\n        uniform sampler2D uPressure;\n        uniform sampler2D uVelocity;\n\n        void main () {\n            float L = texture2D(uPressure, vL).x;\n            float R = texture2D(uPressure, vR).x;\n            float T = texture2D(uPressure, vT).x;\n            float B = texture2D(uPressure, vB).x;\n            vec2 velocity = texture2D(uVelocity, vUv).xy;\n            velocity.xy -= vec2(R - L, T - B);\n            gl_FragColor = vec4(velocity, 0.0, 1.0);\n        }\n      "),H=(_.bindBuffer(_.ARRAY_BUFFER,_.createBuffer()),_.bufferData(_.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),_.STATIC_DRAW),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,_.createBuffer()),_.bufferData(_.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),_.STATIC_DRAW),_.vertexAttribPointer(0,2,_.FLOAT,!1,0,0),_.enableVertexAttribArray(0),function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==e?(_.viewport(0,0,_.drawingBufferWidth,_.drawingBufferHeight),_.bindFramebuffer(_.FRAMEBUFFER,null)):(_.viewport(0,0,e.width,e.height),_.bindFramebuffer(_.FRAMEBUFFER,e.fbo)),t&&(_.clearColor(0,0,0,1),_.clear(_.COLOR_BUFFER_BIT)),_.drawElements(_.TRIANGLES,6,_.UNSIGNED_SHORT,0)}),V=new L(P,X),W=new L(P,C),k=new L(P,N),K=new L(P,z),j=new L(P,M),q=new L(P,I),J=new L(P,O),Q=new L(P,G),Z=new L(P,Y),$=new F(P,"\n      precision highp float;\n      precision highp sampler2D;\n      varying vec2 vUv;\n      varying vec2 vL;\n      varying vec2 vR;\n      varying vec2 vT;\n      varying vec2 vB;\n      uniform sampler2D uTexture;\n      uniform sampler2D uDithering;\n      uniform vec2 ditherScale;\n      uniform vec2 texelSize;\n\n      vec3 linearToGamma (vec3 color) {\n          color = max(color, vec3(0));\n          return max(1.055 * pow(color, vec3(0.416666667)) - 0.055, vec3(0));\n      }\n\n      void main () {\n          vec3 c = texture2D(uTexture, vUv).rgb;\n          #ifdef SHADING\n              vec3 lc = texture2D(uTexture, vL).rgb;\n              vec3 rc = texture2D(uTexture, vR).rgb;\n              vec3 tc = texture2D(uTexture, vT).rgb;\n              vec3 bc = texture2D(uTexture, vB).rgb;\n\n              float dx = length(rc) - length(lc);\n              float dy = length(tc) - length(bc);\n\n              vec3 n = normalize(vec3(dx, dy, length(texelSize)));\n              vec3 l = vec3(0.0, 0.0, 1.0);\n\n              float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);\n              c *= diffuse;\n          #endif\n\n          float a = max(c.r, max(c.g, c.b));\n          gl_FragColor = vec4(c, a);\n      }\n    ");function ee(){let t=ef(S.SIM_RESOLUTION),r=ef(S.DYE_RESOLUTION),a=y.halfFloatTexType,u=y.formatRGBA,l=y.formatRG,c=y.formatR,v=y.supportLinearFiltering?_.LINEAR:_.NEAREST;_.disable(_.BLEND),e=e?en(e,r.width,r.height,u.internalFormat,u.format,a,v):er(r.width,r.height,u.internalFormat,u.format,a,v),n=n?en(n,t.width,t.height,l.internalFormat,l.format,a,v):er(t.width,t.height,l.internalFormat,l.format,a,v),i=et(t.width,t.height,c.internalFormat,c.format,a,_.NEAREST),o=et(t.width,t.height,c.internalFormat,c.format,a,_.NEAREST),h=er(t.width,t.height,c.internalFormat,c.format,a,_.NEAREST)}function et(e,t,r,n,i,o){_.activeTexture(_.TEXTURE0);let a=_.createTexture();_.bindTexture(_.TEXTURE_2D,a),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,o),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,o),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texImage2D(_.TEXTURE_2D,0,r,e,t,0,n,i,null);let u=_.createFramebuffer();_.bindFramebuffer(_.FRAMEBUFFER,u),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,a,0),_.viewport(0,0,e,t),_.clear(_.COLOR_BUFFER_BIT);let l=1/e,c=1/t;return{texture:a,fbo:u,width:e,height:t,texelSizeX:l,texelSizeY:c,attach:e=>(_.activeTexture(_.TEXTURE0+e),_.bindTexture(_.TEXTURE_2D,a),e)}}function er(e,t,r,n,i,o){let a=et(e,t,r,n,i,o),u=et(e,t,r,n,i,o);return{width:e,height:t,texelSizeX:a.texelSizeX,texelSizeY:a.texelSizeY,get read(){return a},set read(value){a=value},get write(){return u},set write(value){u=value},swap(){let e=a;a=u,u=e}}}function en(e,t,r,n,i,o,a){var u;let l;return e.width===t&&e.height===r||(e.read=(u=e.read,l=et(t,r,n,i,o,a),V.bind(),_.uniform1i(V.uniforms.uTexture,u.attach(0)),H(l),l),e.write=et(t,r,n,i,o,a),e.width=t,e.height=r,e.texelSizeX=1/t,e.texelSizeY=1/r),e}g=[],S.SHADING&&g.push("SHADING"),$.setKeywords(g),ee();let ei=Date.now(),eo=0;function ea(){var t,r,a;let u,l,c,v;let f=(l=Math.min(l=((u=Date.now())-ei)/1e3,.016666),ei=u,l);(function(){if(!R)return!1;let e=es(R.clientWidth),t=es(R.clientHeight);return(R.width!==e||R.height!==t)&&(R.width=e,R.height=t,!0)})()&&ee(),(eo+=f*S.COLOR_UPDATE_SPEED)>=1&&(t=eo,r=0,a=0,eo=(t-r)%1+r,w.forEach(e=>{e.color=ev()})),w.forEach(e=>{let t,r;e.moved&&(e.moved=!1,t=e.deltaX*S.SPLAT_FORCE,r=e.deltaY*S.SPLAT_FORCE,eu(e.texcoordX,e.texcoordY,t,r,e.color))}),function(t){_.disable(_.BLEND),q.bind(),_.uniform2f(q.uniforms.texelSize,n.texelSizeX,n.texelSizeY),_.uniform1i(q.uniforms.uVelocity,n.read.attach(0)),H(o),J.bind(),_.uniform2f(J.uniforms.texelSize,n.texelSizeX,n.texelSizeY),_.uniform1i(J.uniforms.uVelocity,n.read.attach(0)),_.uniform1i(J.uniforms.uCurl,o.attach(1)),_.uniform1f(J.uniforms.curl,S.CURL),_.uniform1f(J.uniforms.dt,t),H(n.write),n.swap(),j.bind(),_.uniform2f(j.uniforms.texelSize,n.texelSizeX,n.texelSizeY),_.uniform1i(j.uniforms.uVelocity,n.read.attach(0)),H(i),W.bind(),_.uniform1i(W.uniforms.uTexture,h.read.attach(0)),_.uniform1f(W.uniforms.value,S.PRESSURE),H(h.write),h.swap(),Q.bind(),_.uniform2f(Q.uniforms.texelSize,n.texelSizeX,n.texelSizeY),_.uniform1i(Q.uniforms.uDivergence,i.attach(0));for(let e=0;e<S.PRESSURE_ITERATIONS;e++)_.uniform1i(Q.uniforms.uPressure,h.read.attach(1)),H(h.write),h.swap();Z.bind(),_.uniform2f(Z.uniforms.texelSize,n.texelSizeX,n.texelSizeY),_.uniform1i(Z.uniforms.uPressure,h.read.attach(0)),_.uniform1i(Z.uniforms.uVelocity,n.read.attach(1)),H(n.write),n.swap(),K.bind(),_.uniform2f(K.uniforms.texelSize,n.texelSizeX,n.texelSizeY),y.supportLinearFiltering||_.uniform2f(K.uniforms.dyeTexelSize,n.texelSizeX,n.texelSizeY);let r=n.read.attach(0);_.uniform1i(K.uniforms.uVelocity,r),_.uniform1i(K.uniforms.uSource,r),_.uniform1f(K.uniforms.dt,t),_.uniform1f(K.uniforms.dissipation,S.VELOCITY_DISSIPATION),H(n.write),n.swap(),y.supportLinearFiltering||_.uniform2f(K.uniforms.dyeTexelSize,e.texelSizeX,e.texelSizeY),_.uniform1i(K.uniforms.uVelocity,n.read.attach(0)),_.uniform1i(K.uniforms.uSource,e.read.attach(1)),_.uniform1f(K.uniforms.dissipation,S.DENSITY_DISSIPATION),H(e.write),e.swap()}(f),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.enable(_.BLEND),c=_.drawingBufferWidth,v=(0,_.drawingBufferHeight),$.bind(),S.SHADING&&_.uniform2f($.uniforms.texelSize,1/c,1/v),_.uniform1i($.uniforms.uTexture,e.read.attach(0)),H(null),requestAnimationFrame(ea)}function eu(t,r,i,o,a){var u;let l;k.bind(),_.uniform1i(k.uniforms.uTarget,n.read.attach(0)),_.uniform1f(k.uniforms.aspectRatio,R.width/R.height),_.uniform2f(k.uniforms.point,t,r),_.uniform3f(k.uniforms.color,i,o,0),_.uniform1f(k.uniforms.radius,(u=S.SPLAT_RADIUS/100,(l=R.width/R.height)>1&&(u*=l),u)),H(n.write),n.swap(),_.uniform1i(k.uniforms.uTarget,e.read.attach(0)),_.uniform3f(k.uniforms.color,a.r,a.g,a.b),H(e.write),e.swap()}function el(e,t,r,n){e.id=t,e.down=!0,e.moved=!1,e.texcoordX=r/R.width,e.texcoordY=1-n/R.height,e.prevTexcoordX=e.texcoordX,e.prevTexcoordY=e.texcoordY,e.deltaX=0,e.deltaY=0,e.color=ev()}function ec(e,t,r,n){var i,o;let a,u;e.prevTexcoordX=e.texcoordX,e.prevTexcoordY=e.texcoordY,e.texcoordX=t/R.width,e.texcoordY=1-r/R.height,e.deltaX=(i=e.texcoordX-e.prevTexcoordX,(a=R.width/R.height)<1&&(i*=a),i),e.deltaY=(o=e.texcoordY-e.prevTexcoordY,(u=R.width/R.height)>1&&(o/=u),o),e.moved=Math.abs(e.deltaX)>0||Math.abs(e.deltaY)>0,e.color=n}function ev(){let e=function(e,t,r){let n,i,o,a,u,l,c;switch(a=Math.floor(6*e),l=1*(1-1*(u=6*e-a)),c=r*(1-(1-u)*t),a%6){case 0:n=r,i=c,o=0;break;case 1:n=l,i=r,o=0;break;case 2:n=0,i=r,o=c;break;case 3:n=0,i=l,o=r;break;case 4:n=c,i=0,o=r;break;case 5:n=r,i=0,o=l;break;default:n=0,i=0,o=0}return{r:n,g:i,b:o}}(Math.random(),1,1);return e.r*=.15,e.g*=.15,e.b*=.15,e}function ef(e){let t=_.drawingBufferWidth/_.drawingBufferHeight;t<1&&(t=1/t);let r=Math.round(e),n=Math.round(e*t);return _.drawingBufferWidth>_.drawingBufferHeight?{width:n,height:r}:{width:r,height:n}}function es(e){return Math.floor(e*(window.devicePixelRatio||1))}let em=e=>{let t=w[0];el(t,-1,es(e.clientX),es(e.clientY)),function(e){let t=ev();t.r*=10,t.g*=10,t.b*=10,eu(e.texcoordX,e.texcoordY,10*(Math.random()-.5),30*(Math.random()-.5),t)}(t)},ed=e=>{let t=w[0],r=es(e.clientX),n=es(e.clientY),i=ev();ea(),ec(t,r,n,i),document.body.removeEventListener("mousemove",ed)},eh=e=>{let t=w[0];if(D&&Math.random()>.7)return;let r=es(e.clientX),n=es(e.clientY),i=t.color;ec(t,r,n,i)},eg=e=>{let t=e.targetTouches,r=w[0];for(let e=0;e<t.length;e++){let n=es(t[e].clientX),i=es(t[e].clientY);ea(),el(r,t[e].identifier,n,i)}document.body.removeEventListener("touchstart",eg)},ex=e=>{let t=e.targetTouches,r=w[0];for(let e=0;e<t.length;e++){let n=es(t[e].clientX),i=es(t[e].clientY);el(r,t[e].identifier,n,i)}},eE=e=>{let t=e.targetTouches,r=w[0];for(let e=0;e<t.length;e++)ec(r,es(t[e].clientX),es(t[e].clientY),r.color)},eT=e=>{let t=e.changedTouches,r=w[0];for(let e=0;e<t.length;e++)r.down=!1};return window.addEventListener("mousedown",em),document.body.addEventListener("mousemove",ed),window.addEventListener("mousemove",eh),document.body.addEventListener("touchstart",eg),window.addEventListener("touchstart",ex),window.addEventListener("touchmove",eE,!1),window.addEventListener("touchend",eT),ea(),()=>{window.removeEventListener("resize",E),window.removeEventListener("mousedown",em),document.body.removeEventListener("mousemove",ed),window.removeEventListener("mousemove",eh),document.body.removeEventListener("touchstart",eg),window.removeEventListener("touchstart",ex),window.removeEventListener("touchmove",eE),window.removeEventListener("touchend",eT)}},[E,R,t,r,o,a,u,l,c,v,f,s,m,d,h,g]),R)?null:(0,n.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:(0,n.jsx)("canvas",{ref:x,id:"fluid",className:"w-screen h-screen"})})}}}]);